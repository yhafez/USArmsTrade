[{"/Users/yhafez/Desktop/usarms/src/index.js":"1","/Users/yhafez/Desktop/usarms/src/App.js":"2","/Users/yhafez/Desktop/usarms/src/reportWebVitals.js":"3","/Users/yhafez/Desktop/usarms/src/HeatMap.js":"4","/Users/yhafez/Desktop/usarms/src/utils/format.js":"5","/Users/yhafez/Desktop/usarms/src/components/Instructions/Instructions.js":"6","/Users/yhafez/Desktop/usarms/src/components/RegionChart/RegionChart.js":"7","/Users/yhafez/Desktop/usarms/src/components/Header/Header.js":"8","/Users/yhafez/Desktop/usarms/src/components/HeatMap/HeatMap.js":"9"},{"size":500,"mtime":1607464714656,"results":"10","hashOfConfig":"11"},{"size":1107,"mtime":1607504357435,"results":"12","hashOfConfig":"11"},{"size":362,"mtime":1607127453801,"results":"13","hashOfConfig":"11"},{"size":12760,"mtime":1607504357435,"results":"14","hashOfConfig":"11"},{"size":101,"mtime":1607504357498,"results":"15","hashOfConfig":"11"},{"size":599,"mtime":1607504357437,"results":"16","hashOfConfig":"11"},{"size":2184,"mtime":1607504357437,"results":"17","hashOfConfig":"11"},{"size":191,"mtime":1607504357436,"results":"18","hashOfConfig":"11"},{"size":12024,"mtime":1607504361978,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"13c8d41",{"filePath":"22","messages":"23","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"28","usedDeprecatedRules":"29"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"29"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/yhafez/Desktop/usarms/src/index.js",[],"/Users/yhafez/Desktop/usarms/src/App.js",["41","42","43","44","45","46"],"/Users/yhafez/Desktop/usarms/src/reportWebVitals.js",[],"/Users/yhafez/Desktop/usarms/src/HeatMap.js",["47","48","49"],"import React, { Component } from \"react\";\nimport Datamap from \"datamaps/dist/datamaps.world.min.js\";\nimport d3 from \"d3\";\nimport worldJson from \"./world.topo.json\";\nimport armsSalesTotals from \"./arms_sales_totals.json\";\nimport * as Countries from \"i18n-iso-countries\";\nimport { formatNumber } from \"./utils/format\";\n\nCountries.registerLocale(require(\"i18n-iso-countries/langs/en.json\"));\nexport default class Heatmap extends Component {\n<<<<<<< HEAD\n    \n    componentDidMount(){\n        \n        /*----------------------------------------------- Variables -----------------------------------------------*/\n\n        \n        const startYear = this.props.startYear;\n        const endYear = this.props.endYear;\n\n        const hasStartYear = Boolean(startYear);\n        const hasEndYear = Boolean(endYear);\n\n        // If a start and end date are specified in filter settings, store the range as a string to use as key and in to validate that a date range has been specified\n        let dateRangeString;\n        if(hasStartYear && hasEndYear) dateRangeString = `${startYear}-${endYear}`\n\n        // Tracks largest authorization and dollar amounts based on filter settings\n        let maxAuthorization = 0;\n        let maxDelivery = 0;\n\n        // Define selectedData based on filter settings; default to total\n        let selectedData;\n        dateRangeString\n            ? selectedData = dateRangeString\n            : hasStartYear\n                ? selectedData = startYear\n                : selectedData = \"total\"\n\n\n        /*----------------------------------------------- Dataset -----------------------------------------------*/\n        \n        \n        // Loop over dataset, remove trailing spaces from country names, and create object \"formattedData\" containing country name, total delivery amounts, and authorization amounts, and yearly delivery amounts, and authorization amounts\n        const formattedData = armsSalesTotals.reduce((dataSet, yearlySale) => {\n            \n            // TODO: Logs portions of data that aren't rendered on the map; need to figure out what to do with this\n            // if(Countries.getAlpha3Code(yearlySale.country.trim(), \"en\") === undefined) console.log(yearlySale.country.trim(), yearlySale.country.trim().length );\n\n            const countryCode = Countries.getAlpha3Code(yearlySale.country.trim(), \"en\");\n            const countryName = yearlySale.country.trim();\n            const year = yearlySale.year;\n\n            // Somaliland doesn't have a 3 letter country code as required by Datamaps, but appears in datamaps rendered globe, so assign it a custom 3 letter code\n            if (countryName === \"Somaliland\"){\n                dataSet[\"SML\"] = {\n                    country: countryName,\n                    total:{\n                        authorizations: JSON.parse(yearlySale.authorizations),\n                        deliveries: JSON.parse(yearlySale.deliveries),\n                    },\n                };\n                if(!dateRangeString) adjustMaxValues(yearlySale);\n            }\n            // If country isn't yet stored in totalVals, identify its Alpha-3 code (for compatability with Datamaps) to use as key, and store object containing country name, authorization amount, and delivery amount; else, increment authorization and delivery amounts to yield total amounts across all years\n            else if (!dataSet[countryCode]){\n                \n                dataSet[countryCode] = {\n                    country: countryName,\n                    total:{\n                        countryCode,\n                        authorizations: JSON.parse(yearlySale.authorizations),\n                        deliveries: JSON.parse(yearlySale.deliveries),\n                    },\n                };\n                if(!dateRangeString) adjustMaxValues(yearlySale);\n\n                // If year is not-empty, store authorization and delivery values for that year, else store them as $0\n                dataSet[countryCode][year] = {\n                    authorizations: JSON.parse(yearlySale.authorizations),\n                    deliveries: JSON.parse(yearlySale.deliveries),\n                }\n                \n            }\n            else{\n                dataSet[countryCode].total.authorizations += JSON.parse(yearlySale.authorizations);\n                dataSet[countryCode].total.deliveries += JSON.parse(yearlySale.deliveries);\n                if(!dateRangeString) adjustMaxValues(yearlySale);\n\n                \n                    dataSet[countryCode][year] = {\n                        authorizations: JSON.parse(yearlySale.authorizations),\n                        deliveries: JSON.parse(yearlySale.deliveries),\n                    }\n                \n            }\n            return dataSet;\n        }, {});\n            \n        // Fill in missing data with values of $0 for deliveries and amoutns\n        for (let country in formattedData){   \n\n            for( let year=1996; year <= 2020; ++year){\n                if(!formattedData[country][year]){\n                    formattedData[country][year] = {\n                        authorizations: 0,\n                        deliveries: 0,\n                    }\n                }\n            }\n        }\n\n        // If a date range is specified in the filter settings, check the first item to see if there is a stored total value for that date range in the dataset and, if not, calculate the totals for that date range and store/memoize them\n        if(dateRangeString){\n            \n            if(!formattedData[Object.keys(formattedData)[0]][dateRangeString]){\n\n                for (let year = startYear; year<=endYear; ++year){\n                    for (let country in formattedData){\n                        \n                        if(!formattedData[country][dateRangeString]){\n                            formattedData[country][dateRangeString] = {\n                                authorizations: formattedData[country][year].authorizations,\n                                deliveries: formattedData[country][year].deliveries\n                            }\n                        }\n                        else{\n                            formattedData[country][dateRangeString].authorizations += formattedData[country][year].authorizations;\n                            formattedData[country][dateRangeString].authorizations += formattedData[country][year].deliveries;\n                            adjustMaxValues(formattedData[country][dateRangeString]);\n                        }\n                        \n                    } \n                }\n            }\n        }\n\n\n        // Set color scale for both deliveries and authorizations\n        let paletteScaleDeliveries = d3.scale.linear()\n            .domain([0, maxDelivery])\n            .range([\"rgb(159, 142, 173)\", \"rgb(128, 0, 255)\"]);\n\n        let paletteScaleAuthorizations = d3.scale.linear()\n            .domain([0, maxAuthorization])\n            .range([\"rgb(159, 142, 173)\", \"rgb(128, 0, 255)\"]);\n\n        // Assign color weight to each country and fill in missing years in formattedData\n        // TODO: Weight is currently based off deliveries; should we make it a button to toggle between weighing by deliveries and alternatively weighing by authorizations?\n        \n        for (let country in formattedData) {\n            \n            if(formattedData[country][selectedData].deliveries === 0){\n                formattedData[country].fillColor = \"#aaaaaa\";\n            }\n            else{\n                formattedData[country].fillColor = paletteScaleDeliveries(\n                    formattedData[country][selectedData].deliveries\n                );\n            }\n        }\n        \n        \n        /*----------------------------------------------- Helper Functions -----------------------------------------------*/\n\n\n        // Helper function to adjust value of maxAuthorization and maxDelivery if those values in the item being processed are larger than currently set value\n        function adjustMaxValues({ authorizations, deliveries }){\n            \n            //TODO: Date range\n            // If a start date and end date are set, then maxAuthorization and maxDelivery are set to represent the values of the countries with the highest sum of authorization and delivery amounts in that date range\n            if(dateRangeString){\n                if (+authorizations > maxAuthorization) maxAuthorization = authorizations;\n                if (+deliveries > maxDelivery) maxDelivery = deliveries;\n            }\n            // If only a start date is set, then maxAuthorization and maxDelivery are set to represent the values of the countries with the highest authorization and delivery amounts for that year only\n            else if(hasStartYear){\n                if (+authorizations > maxAuthorization) maxAuthorization = authorizations;\n                if (+deliveries > maxDelivery) maxDelivery = deliveries;\n            }\n            // If no start date or end date are set, maxAuthorization and maxDelivery defaults to representing the values of the countries with the highest sum of authorization and delivery amounts across all years\n            else{\n                if (+authorizations > maxAuthorization) maxAuthorization = authorizations;\n                if (+deliveries > maxDelivery) maxDelivery = deliveries;\n            }\n        }\n        \n        console.table(formattedData);\n\n        /*----------------------------------------------- Datamaps Config -----------------------------------------------*/\n\n\n        // Creates and configures the world map and its styles, as well as popups on hover\n        const map = new Datamap({\n            element: document.getElementById('heat_map'),\n            scope: 'world',\n             //Default color if no fillColor is specified\n            fills: {defaultFill: 'rgb(170, 170, 170)'},\n            // Specifies formattedData as data source for popup data and populating weighted color\n            data: formattedData,\n            dataType: 'json',\n            geographyConfig: {\n                dataUrl: \"./world.topo.json\",\n                popupOnHover: true,\n                borderColor: '#000',\n                borderWidth: '0.5',\n                highlightOnHover: true,\n                highlightBorderWidth: 1.5,\n                highlightBorderColor: \"#03fc5a\",\n                // Matches highlight color to fill color, so color doesn't change on hover\n                highlightFillColor: function(geo) {\n                    return geo['fillColor'] || 'rgb(170, 170, 170)';\n                }, \n                // Defines template of popup that appears when country is hovered over based on filter settings\n                popupTemplate: function (geo, data){\n                    if(!data){ return; }\n                    if(selectedData === \"total\"){\n                        return [\n                            '<div class=\"hoverinfo\">',\n                                '<strong>', geo.properties.name + \" (1996 - 2020)\",'</strong>',\n                                '<br>Authorizations: <strong>$', data.total.authorizations, '</strong>',\n                                '<br>Deliveries: <strong>$', data.total.deliveries, '</strong>',\n                            '</div>'].join('')\n                    }\n\n                    //TODO: Date range\n                    else if(selectedData === dateRangeString){\n                        return [\n                            '<div class=\"hoverinfo\">',\n                                '<strong>', geo.properties.name + \" (\" + startYear + \" - \" + endYear + \")\",'</strong>',\n                                '<br>Authorizations: <strong>$', data[dateRangeString].authorizations, '</strong>',\n                                '<br>Deliveries: <strong>$', data[dateRangeString].deliveries, '</strong>',\n                            '</div>'].join('')\n                    }\n                    else {\n                        return [\n                        '<div class=\"hoverinfo\">',\n                            '<strong>', geo.properties.name + \" (\" + startYear + \")\",'</strong>',\n                            '<br>Authorizations: <strong>$', data[startYear].authorizations, '</strong>',\n                            '<br>Deliveries: <strong>$', data[startYear].deliveries, '</strong>',\n                        '</div>'].join('')\n                    }\n                }\n            },\n        });\n    }\n    \n\n    /*----------------------------------------------- Component Render -----------------------------------------------*/\n\n    // Creates div React component which is used by Datamaps above as the container for the map\n    render(){\n        return(\n            <div id=\"heat_map\" style={{\n                height: \"100%\",\n                width: \"100%\",\n            }}></div>\n        )\n=======\n  componentDidMount() {\n    // Tracks largest authorization and dollar amounts\n    let maxAuthorization = 0;\n    let maxDelivery = 0;\n\n    // Helper function to adjust value of maxAuthorization and maxDelivery if those values in the item being processed are larger\n    const adjustMaxValues = (authorizationAmount, deliveriesAmount) => {\n      if (+authorizationAmount > maxAuthorization)\n        maxAuthorization = authorizationAmount;\n      if (+deliveriesAmount > maxDelivery) maxDelivery = deliveriesAmount;\n    };\n\n    // Loop over dataset, remove trailing spaces, and create object \"totalVals\" containing country name, delivery amounts, and authorization amounts\n    let totalVals = armsSalesTotals.reduce((total, yearlySale, index) => {\n      // TODO: Logs portions of data that aren't rendered on the map; need to figure out what to do with this\n      // if(Countries.getAlpha3Code(yearlySale.country.trim(), \"en\") === undefined) console.log(yearlySale.country.trim(), yearlySale.country.trim().length );\n\n      // Somaliland doesn't have a 3 letter country code as required by Datamaps, but appears in the dataset, so assign it a custom 3 letter code\n      if (yearlySale.country.trim() === \"Somaliland\") {\n        total[\"SML\"] = {\n          country: yearlySale.country.trim(),\n          authorizations: JSON.parse(yearlySale.authorizations),\n          deliveries: JSON.parse(yearlySale.deliveries),\n        };\n        adjustMaxValues(yearlySale.authorizations, yearlySale.deliveries);\n      }\n      // If country isn't yet stored in totalVals, identify its Alpha-3 code (for compatability with Datamaps) to use as key, and store object containing country name, authorization amount, and delivery amount; else, increment authorization and delivery amounts to yield total amounts across all years\n      else if (\n        !total[Countries.getAlpha3Code(yearlySale.country.trim(), \"en\")]\n      ) {\n        total[Countries.getAlpha3Code(yearlySale.country.trim(), \"en\")] = {\n          country: yearlySale.country.trim(),\n          authorizations: JSON.parse(yearlySale.authorizations),\n          deliveries: JSON.parse(yearlySale.deliveries),\n        };\n        adjustMaxValues(yearlySale.authorizations, yearlySale.deliveries);\n      } else {\n        total[\n          Countries.getAlpha3Code(yearlySale.country.trim(), \"en\")\n        ].authorizations += JSON.parse(yearlySale.authorizations);\n        total[\n          Countries.getAlpha3Code(yearlySale.country.trim(), \"en\")\n        ].deliveries += JSON.parse(yearlySale.deliveries);\n        adjustMaxValues(yearlySale.authorizations, yearlySale.deliveries);\n      }\n      return total;\n    }, {});\n\n    // Set color scale for both deliveries and authorizations\n    let paletteScaleDeliveries = d3.scale\n      .linear()\n      .domain([0, maxDelivery])\n      .range([\"rgb(170, 170, 170)\", \"rgb(128, 0, 255)\"]);\n\n    let paletteScaleAuthorizations = d3.scale\n      .linear()\n      .domain([0, maxAuthorization])\n      .range([\"rgb(170, 170, 170)\", \"rgb(128, 0, 255)\"]);\n\n    // Assign color weight to each country\n    // TODO: Weight is currently based off deliveries; should we make it a button to toggle between weighing by deliveries and alternatively weighing by authorizations?\n    for (let country in totalVals) {\n      totalVals[country].fillColor = paletteScaleDeliveries(\n        totalVals[country].deliveries\n      );\n>>>>>>> d113427... formatted dollar values and refactored pop up template\n    }\n\n    console.table(totalVals);\n\n    // Creates and configures the world map and its styles, as well as popups on hover\n    const map = new Datamap({\n      element: document.getElementById(\"heat_map\"),\n      scope: \"world\",\n      fills: { defaultFill: \"rgb(170, 170, 170)\" }, //Default color if no fillColor is specified\n      data: totalVals, // Specifies totalVals as data source for popups and weighted color fills\n      dataType: \"json\",\n      geographyConfig: {\n        dataUrl: \"./world.topo.json\",\n        popupOnHover: true,\n        borderColor: \"#000\",\n        borderWidth: \"0.5\",\n        highlightOnHover: true,\n        highlightBorderWidth: 1.5,\n        highlightBorderColor: \"#03fc5a\",\n        highlightFillColor: function (geo) {\n          return geo[\"fillColor\"] || \"rgb(170, 170, 170)\";\n        }, // Matches highlight color to fill color, so color doesn't change on hover\n        /// Defines template of popup that appears when country is hovered over\n        popupTemplate: function (geo, data) {\n          let authorizations = data.authorizations;\n          let deliveries = data.deliveries;\n          if (!data) {\n            return;\n          }\n          return `\n          <div class=\"hoverinfo\">\n            <strong>${geo.properties.name}</strong> <br/>\n              Total Authorizations: <strong> $${formatNumber(\n                authorizations\n              )}</strong> <br/>\n              Total Deliveries: <strong>$${formatNumber(deliveries)}</strong>\n          </div> `;\n        },\n      },\n      // Creates the map and default behavior such as centering and scale\n      // setProjection: function (element) {\n      //     let projection = d3.geo.mercator()\n      //         .center([0, 0])\n      //         .scale(200)\n      //         .translate([element.offsetWidth / 2, element.offsetHeight / 2]);\n      //     let path = d3.geo.path().projection(projection);\n      //     return { path: path, projection: projection };\n      // },\n    });\n  }\n\n  // Creates div React component which is used by Datamaps above as the container for the map\n  render() {\n    return (\n      <div\n        id=\"heat_map\"\n        style={{\n          height: \"100%\",\n          width: \"100%\",\n        }}\n      ></div>\n    );\n  }\n}\n",["50","51"],"/Users/yhafez/Desktop/usarms/src/utils/format.js",[],"/Users/yhafez/Desktop/usarms/src/components/Instructions/Instructions.js",[],"/Users/yhafez/Desktop/usarms/src/components/RegionChart/RegionChart.js",["52"],"import regionalData from \"../../data/regional_arms_sales_notifications.json\";\nimport React from \"react\";\nimport { Pie, Doughnut } from \"react-chartjs-2\";\nimport { formatNumber } from \"../../utils/format\";\n\nlet labels = regionalData.map((el) => el[\"Region Arms Sales Dashboard\"]);\nlet numbers = regionalData.map((el) =>\n  el.Notifications.match(/[0-9]/g).join(\"\")\n);\n// console.log(numbers);\nconst state = {\n  labels,\n  datasets: [\n    {\n      label: \"Arms Sales\",\n      data: numbers, //data displayed on pie\n      backgroundColor: [\"#F54EA2\", \"#41b6e6\", \"#f6003c\", \"#7ebc59\", \"#8134af\"],\n      hoverBackgroundColor: [\n        \"#b9006e\",\n        \"#005792\",\n        \"#C1292E\",\n        \"#2b9464\",\n        \"#42218E\",\n      ],\n    },\n  ],\n};\nclass RegionChart extends React.Component {\n  render() {\n    return (\n      <div style={{ width: \"700px\", margin: \"50px\" }}>\n        <Doughnut\n          data={state}\n          width={200}\n          height={400}\n          options={{\n            maintainAspectRatio: false,\n            responsive: true,\n            title: {\n              display: true,\n              text: \"Arms Sales Notifications by Region\",\n              fontSize: 25,\n            },\n            legend: {\n              display: true,\n              position: \"right\",\n              labels: {\n                fontSize: 20, //labels font size\n                fontColor: \"#000\",\n              },\n            },\n            tooltips: {\n              //pop up info\n              bodyFontSize: 15,\n              callbacks: {\n                label: function (tooltipItem, data) {\n                  // console.log({ tooltipItem, data });\n                  const label = data.labels[tooltipItem.index]; //tooltipItem.index gives the index of this data item in the dataset\n                  const value = formatNumber(\n                    data.datasets[tooltipItem.datasetIndex].data[\n                      tooltipItem.index\n                    ] //finds the matching data item in dataset\n                  );\n                  return `${label}: $${value}`;\n                },\n              },\n            },\n          }}\n        />\n      </div>\n    );\n  }\n}\nexport default RegionChart;\n","/Users/yhafez/Desktop/usarms/src/components/Header/Header.js",[],"/Users/yhafez/Desktop/usarms/src/components/HeatMap/HeatMap.js",["53","54","55"],{"ruleId":"56","severity":1,"message":"57","line":2,"column":8,"nodeType":"58","messageId":"59","endLine":2,"endColumn":12},{"ruleId":"56","severity":1,"message":"60","line":12,"column":24,"nodeType":"58","messageId":"59","endLine":12,"endColumn":39},{"ruleId":"56","severity":1,"message":"61","line":13,"column":21,"nodeType":"58","messageId":"59","endLine":13,"endColumn":33},{"ruleId":"56","severity":1,"message":"62","line":14,"column":19,"nodeType":"58","messageId":"59","endLine":14,"endColumn":29},{"ruleId":"56","severity":1,"message":"63","line":17,"column":10,"nodeType":"58","messageId":"59","endLine":17,"endColumn":17},{"ruleId":"56","severity":1,"message":"64","line":17,"column":19,"nodeType":"58","messageId":"59","endLine":17,"endColumn":29},{"ruleId":"56","severity":1,"message":"65","line":4,"column":8,"nodeType":"58","messageId":"59","endLine":4,"endColumn":17},{"ruleId":"56","severity":1,"message":"66","line":142,"column":13,"nodeType":"58","messageId":"59","endLine":142,"endColumn":39},{"ruleId":"56","severity":1,"message":"67","line":192,"column":15,"nodeType":"58","messageId":"59","endLine":192,"endColumn":18},{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","replacedBy":"71"},{"ruleId":"56","severity":1,"message":"72","line":3,"column":10,"nodeType":"58","messageId":"59","endLine":3,"endColumn":13},{"ruleId":"56","severity":1,"message":"65","line":5,"column":8,"nodeType":"58","messageId":"59","endLine":5,"endColumn":17},{"ruleId":"56","severity":1,"message":"66","line":144,"column":9,"nodeType":"58","messageId":"59","endLine":144,"endColumn":35},{"ruleId":"56","severity":1,"message":"67","line":193,"column":11,"nodeType":"58","messageId":"59","endLine":193,"endColumn":14},"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","'setDisplayTotal' is assigned a value but never used.","'setStartYear' is assigned a value but never used.","'setEndYear' is assigned a value but never used.","'dataSet' is assigned a value but never used.","'setDataSet' is assigned a value but never used.","'worldJson' is defined but never used.","'paletteScaleAuthorizations' is assigned a value but never used.","'map' is assigned a value but never used.","no-native-reassign",["73"],"no-negated-in-lhs",["74"],"'Pie' is defined but never used.","no-global-assign","no-unsafe-negation"]